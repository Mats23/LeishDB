<?phpclass Genes_model extends CI_Model{    public function __construct()    {        $this->load->database();    }    //Function for search Gene by ID    public function SearchbyGeneID($id)    {        $this->db->from('genes');        $this->db->join('proteins', 'proteins.protein_id = genes.protein_id', 'left');        $this->db->where('genes.id', $id);        $query = $this->db->get();        return $query->result_array();    }    //Function for databases by protein_id    public function SearchDatabasesbyProteinID($protein_id)    {        $this->db->from('crossreference');        $this->db->join('databases', 'crossreference.database_id = databases.id', 'left');        $this->db->where('crossreference.protein_id', $protein_id);        $query = $this->db->get();        return $query->result_array();    }    //Function for search Gene by Chromossome    public function SearchGenesbyChromossome($genomeid)    {        $this->db->from('genes');        $this->db->join('proteins', 'genes.protein_id = proteins.protein_id', 'left');        $this->db->where('genes.genomeid', $genomeid);        $this->db->and_where('genes.protein_id <> ', "''");        $query = $this->db->get();        return $query->result_array();    }    //Function for search ncRNA by Chromossome    public function SearchncRNAbyChromossome($genomeid)    {        $this->db->from('ncrna');        $this->db->where('ncrna.genomeid', $genomeid);        $query = $this->db->get();        return $query->result_array();    }}function Searchbygenescoordinates($conexao, $genomeid, $start, $end){    $genomeid = mysqli_real_escape_string($conexao, $genomeid);    $result = mysqli_query($conexao, "select g.*, p.* from genes as g left join proteins as p        on (g.protein_id = p.protein_id) where g.genomeid = {$genomeid} AND (g.startgenomelocal >= {$start}         AND g.endgenomelocal <= {$end}) and g.protein_id <> ''");    $ncrnas = array();    while ($ncrna = mysqli_fetch_assoc($result)) {        array_push($ncrnas, $ncrna);    }    return $ncrnas;}function Searchbyncrnacoordinates($conexao, $genomeid, $start, $end){    $genomeid = mysqli_real_escape_string($conexao, $genomeid);    $start = mysqli_real_escape_string($conexao, $start);    $end = mysqli_real_escape_string($conexao, $end);    $result = mysqli_query($conexao, "select rna.* from ncrna as rna where rna.genomeid = {$genomeid} AND     (rna.start_location >= {$start} AND rna.end_location <= {$end})");    $ncrnas = array();    while ($ncrna = mysqli_fetch_assoc($result)) {        array_push($ncrnas, $ncrna);    }    return $ncrnas;}//Function for search All Optionsfunction SearchbyAllOptions($conexao, $term){    $term = mysqli_real_escape_string($conexao, $term);    $query = "select g.*, p.proteinname from genes as g left join proteins as p" .            " on (g.protein_id = p.protein_id) where UPPER(p.proteinname) LIKE UPPER('%" . $term . "%') or " .            " UPPER(g.protein_id) LIKE UPPER('%" . $term . "%') or g.id LIKE '" . $term . "' " .            " or UPPER(p.genename) LIKE UPPER('" . $term . "') and g.protein_id <> ''";    $result = mysqli_query($conexao, $query);    $genes = array();    if (mysqli_num_rows($result) > 0) {        while ($gene = mysqli_fetch_assoc($result)) {            array_push($genes, $gene);        }    }    return $genes;}//Function for search GO TERMSfunction SearchAllGOTerms($conexao, $protein_id){    $protein_id = mysqli_real_escape_string($conexao, $protein_id);    $query = "select * from proteinsgo as pgo where pgo.protein_id LIKE '%" . $protein_id . "%'";    $result = mysqli_query($conexao, $query);    $goterms = array();    if (mysqli_num_rows($result) > 0) {        while ($goterm = mysqli_fetch_assoc($result)) {            array_push($goterms, $goterm);        }    }    return $goterms;}function SearchProteinNameJSON($conexao){    $sql = "select DISTINCT proteinname from proteins as p";    $result = mysqli_query($conexao, $sql);    $proteins = array();    if (mysqli_num_rows($result) > 0) {        while ($proteinname = mysqli_fetch_assoc($result)) {            array_push($proteins, $proteinname);        }    }    return $proteins;}//Function for search GO TERMS by typefunction SearchAllGOTermsbytype($conexao, $protein_id, $type){    $protein_id = mysqli_real_escape_string($conexao, $protein_id);    $type = mysqli_real_escape_string($conexao, $type);    $query = "select pgo.*, go.* from proteinsgo as pgo, geneontology as go 	where TRIM(go.geneontology_id) = TRIM(pgo.geneontology_id) and pgo.protein_id LIKE '%" . $protein_id . "%' and go.type LIKE '%" . $type . "%'";    $result = mysqli_query($conexao, $query);    $goterms = array();    if (mysqli_num_rows($result) > 0) {        while ($goterm = mysqli_fetch_assoc($result)) {            array_push($goterms, $goterm);        }    }    return $goterms;}//Function for search Gene by SWISS-PROT IDfunction getSequenceGene($conexao, $genomeid, $end, $start){    $genomeid = mysqli_real_escape_string($conexao, $genomeid);    $start = mysqli_real_escape_string($conexao, $start);    $end = mysqli_real_escape_string($conexao, $end);    if ($end < $start) {        $var_tmp = $end;        $end = $start;        $start = $var_tmp;    }    $result = mysqli_query($conexao, "SELECT SUBSTRING(chromossomes.sequence FROM {$start} FOR ({$end}-{$start})) as sequence     FROM chromossomes WHERE chromossomes.idchromosome = {$genomeid}");    return mysqli_fetch_assoc($result);}